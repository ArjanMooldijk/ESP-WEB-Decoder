<!doctype html>
<html style="width:100%;height:100%">

<head>
  <title>Booster Monitor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
  <h1>Booster monitor</h1>

  <div class="container">
    <div class="row">

      <div class="meter-set col-lg-2 col-md-3 col-sm-4 col-xs">
        <div id="amps">
          <canvas id="stroom1" class="a-meter"></canvas>
          <p id="sign">A</p>
        </div>
        <div id="peaks">
          <p id="peak1" class="p-display">0.000</p>
        </div>
        <div id="volts">
          <canvas id="volt1" class="v-meter"></canvas>
          <p id="sign">V</p>
        </div>
      </div>

      <div class="meter-set col-lg-2 col-md-3 col-sm-4 col-xs">
        <div id="amps">
          <canvas id="stroom2" class="a-meter"></canvas>
          <p id="sign">A</p>
        </div>
        <div id="peaks">
          <p id="peak2" class="p-display">0.000</p>
        </div>
        <div id="volts">
          <canvas id="volt2" class="v-meter"></canvas>
          <p id="sign">V</p>
        </div>
      </div>

      <div class="meter-set col-lg-2 col-md-3 col-sm-4 col-xs">
        <div id="amps">
          <canvas id="stroom3" class="a-meter"></canvas>
          <p id="sign">A</p>
        </div>
        <div id="peaks">
          <p id="peak3" class="p-display">0.000</p>
        </div>
        <div id="volts">
          <canvas id="volt3" class="v-meter"></canvas>
          <p id="sign">V</p>
        </div>
      </div>

      <div class="meter-set col-lg-2 col-md-3 col-sm-4 col-xs">
        <div id="amps">
          <canvas id="stroom4" class="a-meter"></canvas>
          <p id="sign">A</p>
        </div>
        <div id="peaks">
          <p id="peak4" class="p-display">0.000</p>
        </div>
        <div id="volts">
          <canvas id="volt4" class="v-meter"></canvas>
          <p id="sign">V</p>
        </div>
      </div>

      <div class="meter-set col-lg-2 col-md-6 col-sm-4 col-xs">
        <div id="amps">
          <canvas id="stroom5" class="a-meter"></canvas>
          <p id="sign">A</p>
        </div>
        <div id="peaks">
          <p id="peak5" class="p-display">0.000</p>
        </div>
        <div id="volts">
          <canvas id="volt5" class="v-meter"></canvas>
          <p id="sign">V</p>
        </div>
      </div>

      <div class="meter-set col-lg-2 col-md-6 col-sm-4 col-xs">
        <div id="amps">
          <canvas id="stroom6" class="a-meter"></canvas>
          <p id="sign">A</p>
        </div>
        <div id="peaks">
          <p id="peak6" class="p-display">0.000</p>
        </div>
        <div id="volts">
          <canvas id="volt6" class="v-meter"></canvas>
          <p id="sign">V</p>
        </div>
      </div>
    </div>
  </div>
</body>

<script>
  function initScriptedGauges() {
    var S1 = new RadialGauge({
      renderTo: 'stroom1',
      width: 200,
      height: 250,
      value: 0,
      minValue: 0,
      maxValue: 5,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: ['0', '1', '2', '3', '4', '5'],
      minorTicks: 10,
      stroketicks: false,
      highlights: [{ from: 4, to: 5, color: 'rgba(200, 50, 50, .65)' }],
      colorplate: '#f1f',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Schalten',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var V1 = new RadialGauge({
      renderTo: 'volt1',
      width: 200,
      height: 250,
      value: 0,
      minValue: 13,
      maxValue: 18,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: [
        '13', '13.5', '14', '14.5', '15', '15.5', '16', '16.5', '17', '17.5', '18'
      ],
      minorTicks: 5,
      stroketicks: false,
      highlights: [
        { from: 17, to: 18, color: 'rgba(200,50,0,.65)' }
      ],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Schalten',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var S2 = new RadialGauge({
      renderTo: 'stroom2',
      width: 200,
      height: 250,
      value: 0,
      minValue: 0,
      maxValue: 5,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: ['0', '1', '2', '3', '4', '5'],
      minorTicks: 10,
      stroketicks: false,
      highlights: [{ from: 4, to: 5, color: 'rgba(200, 50, 50, .65)' }],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Domodossola',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var V2 = new RadialGauge({
      renderTo: 'volt2',
      width: 200,
      height: 250,
      value: 0,
      minValue: 13,
      maxValue: 18,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: [
        '13', '13.5', '14', '14.5', '15', '15.5', '16', '16.5', '17', '17.5', '18'
      ],
      minorTicks: 5,
      stroketicks: false,
      highlights: [
        { from: 17, to: 18, color: 'rgba(200,50,0,.65)' }
      ],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Domodossola',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var S3 = new RadialGauge({
      renderTo: 'stroom3',
      width: 200,
      height: 250,
      value: 0,
      minValue: 0,
      maxValue: 5,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: ['0', '1', '2', '3', '4', '5'],
      minorTicks: 10,
      stroketicks: false,
      highlights: [{ from: 4, to: 5, color: 'rgba(200, 50, 50, .65)' }],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Brig',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var V3 = new RadialGauge({
      renderTo: 'volt3',
      width: 200,
      height: 250,
      value: 0,
      minValue: 13,
      maxValue: 18,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: [
        '13', '13.5', '14', '14.5', '15', '15.5', '16', '16.5', '17', '17.5', '18'
      ],
      minorTicks: 5,
      stroketicks: false,
      highlights: [
        { from: 17, to: 18, color: 'rgba(200,50,0,.65)' }
      ],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Brig',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var S4 = new RadialGauge({
      renderTo: 'stroom4',
      width: 200,
      height: 250,
      value: 0,
      minValue: 0,
      maxValue: 5,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: ['0', '1', '2', '3', '4', '5'],
      minorTicks: 10,
      stroketicks: false,
      highlights: [{ from: 4, to: 5, color: 'rgba(200, 50, 50, .65)' }],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Lalden',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var V4 = new RadialGauge({
      renderTo: 'volt4',
      width: 200,
      height: 250,
      value: 0,
      minValue: 13,
      maxValue: 18,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: [
        '13', '13.5', '14', '14.5', '15', '15.5', '16', '16.5', '17', '17.5', '18'
      ],
      minorTicks: 5,
      stroketicks: false,
      highlights: [
        { from: 17, to: 18, color: 'rgba(200,50,0,.65)' }
      ],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Lalden',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var S5 = new RadialGauge({
      renderTo: 'stroom5',
      width: 200,
      height: 250,
      value: 0,
      minValue: 0,
      maxValue: 5,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: ['0', '1', '2', '3', '4', '5'],
      minorTicks: 10,
      stroketicks: false,
      highlights: [{ from: 4, to: 5, color: 'rgba(200, 50, 50, .65)' }],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Ausserberg',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var V5 = new RadialGauge({
      renderTo: 'volt5',
      width: 200,
      height: 250,
      value: 0,
      minValue: 13,
      maxValue: 18,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: [
        '13', '13.5', '14', '14.5', '15', '15.5', '16', '16.5', '17', '17.5', '18'
      ],
      minorTicks: 5,
      stroketicks: false,
      highlights: [
        { from: 17, to: 18, color: 'rgba(200,50,0,.65)' }
      ],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Ausserberg',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var S6 = new RadialGauge({
      renderTo: 'stroom6',
      width: 200,
      height: 250,
      value: 0,
      minValue: 0,
      maxValue: 5,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: ['0', '1', '2', '3', '4', '5'],
      minorTicks: 10,
      stroketicks: false,
      highlights: [{ from: 4, to: 5, color: 'rgba(200, 50, 50, .65)' }],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Hohtenn',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

    var V6 = new RadialGauge({
      renderTo: 'volt6',
      width: 200,
      height: 250,
      value: 0,
      minValue: 13,
      maxValue: 18,
      valuedec: 1,
      startAngle: 90,
      ticksAngle: 180,
      majorTicks: [
        '13', '13.5', '14', '14.5', '15', '15.5', '16', '16.5', '17', '17.5', '18'
      ],
      minorTicks: 5,
      stroketicks: false,
      highlights: [
        { from: 17, to: 18, color: 'rgba(200,50,0,.65)' }
      ],
      colorplate: '#fff',
      borders: false,
      borderOuterWidth: 0,
      borderMiddleWidth: 0,
      borderInnerWidth: 0,
      borderShadowWidth: 0,
      colorMajorTicks: '#2F2F2F',
      colorMinorTicks: '#2F2F2F',
      title: 'Hohtenn',
      colorTitle: '#010',
      colorUnits: '#222',
      colorNumbers: '#222',
      needleStart: 0,
      needleShadow: false,
      needleWidth: 3,
      colorNeedle: 'rgba(240, 128, 128, 1)',
      colorNeedleEnd: 'rgba(255, 160, 122, .9)',
      valueBox: false,
      animationrule: 'quad',
      animationduration: 400
    }).draw();

  }

  if (!window.addEventListener) {
    window.addEventListener = function (evt, listener) {
      window.attachEvent('on' + evt, listener);
    };
  }
  if (!Array.prototype.forEach) {
    Array.prototype.forEach = function (cb) {
      var i = 0, s = this.length;
      for (; i < s; i++) {
        cb && cb(this[i], i, this);
      }
    }
  }

  window.addEventListener('load', function () {
    document.gauges.forEach(function (gauge, index) {
      setInterval(function () {
        var xhttpG = new XMLHttpRequest();
        var xhttpP = new XMLHttpRequest();
        xhttpP.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200 && index > 0  && index < 7) {
            document.getElementById("peak" + index).innerHTML = this.responseText;
          }
        };
        xhttpG.onreadystatechange = function () {
          if (this.readyState == 4 && this.status == 200) {
            gauge.value = this.responseText;
          }
        };

        if (index > 0 && index < 7) {
          xhttpP.open("GET", "/p" + index, true);
          xhttpP.send();
        }
        xhttpG.open("GET", "/" + index, true);
        xhttpG.send();
      }, 600)
    });
  });

  document.getElementById("peak1").onclick = function () { resetCp(1) };
  document.getElementById("peak2").onclick = function () { resetCp(2) };
  document.getElementById("peak3").onclick = function () { resetCp(3) };
  document.getElementById("peak4").onclick = function () { resetCp(4) };
  document.getElementById("peak5").onclick = function () { resetCp(5) };
  document.getElementById("peak6").onclick = function () { resetCp(6) };


  function resetCp(pmeter) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        document.getElementById("peak" + pmeter).innerHTML = this.responseText;
      }
    };
    xhttp.open("GET", "/r" + pmeter, true);
    xhttp.send();
  };

// // animage all gauges on a page
// window.addEventListener('load', function() {
//     document.gauges.forEach(function(gauge) {
//         setInterval(function() {
//             gauge.value = Math.random() *
//                 (gauge.options.maxValue - gauge.options.minValue) / 1 +
//                 gauge.options.minValue * 1 ;
//         }, gauge.animation.duration + 500);
//     });
// });
</script>

<script async src="gauge.min.js" onload="initScriptedGauges()"></script>

</html>